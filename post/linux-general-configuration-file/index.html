<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Linux通用配置文件 | LYJ's Blog</title>
<meta name=keywords content="Linux通用配置文件,.desktop,.service,fonts.conf"><meta name=description content="在不同的Linux发行版本中都存在这一些通用的配置文件，这是一些通用配置文件的写法"><meta name=author content="LYJ"><link rel=canonical href=https://lyj.cloudns.ch/post/linux-general-configuration-file/><link crossorigin=anonymous href=/assets/css/stylesheet.625b655134c8fb20526ea156a9e21bf567138d148c9a030df52c0ec366106466.css integrity="sha256-YltlUTTI+yBSbqFWqeIb9WcTjRSMmgMN9SwOw2YQZGY=" rel="preload stylesheet" as=style><link rel=icon href=https://lyj.cloudns.ch/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://lyj.cloudns.ch/favicon.png><link rel=icon type=image/png sizes=32x32 href=https://lyj.cloudns.ch/favicon.png><link rel=apple-touch-icon href=https://lyj.cloudns.ch/favicon.png><link rel=mask-icon href=https://lyj.cloudns.ch/favicon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://lyj.cloudns.ch/post/linux-general-configuration-file/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://lyj.cloudns.ch/post/linux-general-configuration-file/"><meta property="og:site_name" content="LYJ's Blog"><meta property="og:title" content="Linux通用配置文件"><meta property="og:description" content="在不同的Linux发行版本中都存在这一些通用的配置文件，这是一些通用配置文件的写法"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-07-19T22:47:54+00:00"><meta property="article:modified_time" content="2024-07-19T22:47:54+00:00"><meta property="article:tag" content="Linux"><meta property="og:image" content="https://lyj.cloudns.ch/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://lyj.cloudns.ch/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Linux通用配置文件"><meta name=twitter:description content="在不同的Linux发行版本中都存在这一些通用的配置文件，这是一些通用配置文件的写法"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://lyj.cloudns.ch/post/"},{"@type":"ListItem","position":2,"name":"Linux通用配置文件","item":"https://lyj.cloudns.ch/post/linux-general-configuration-file/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Linux通用配置文件","name":"Linux通用配置文件","description":"在不同的Linux发行版本中都存在这一些通用的配置文件，这是一些通用配置文件的写法","keywords":["Linux通用配置文件",".desktop",".service","fonts.conf"],"articleBody":"desktop文件 在日常使用Linux系统的时候，经常会遇到一些软件只提供了可执行文件，没有提供可以直接通过包管理工具安装的途径，比如说常见的AppImage 文件或者是一些没有对特定发行版本进行安装包编译的开源项目，这些软件就只能通过命令行或者是在文件管理器下找到对应的启动文件在启动比较繁琐，不像那些通过包管理工具安装的软件，可以有桌面图标或者直接应用菜单中显示；而想要这些软件更包管理工具一样拥有桌面图标/应用菜单中显示，可以编写对应的desktop文件。\ndesktop文件是一个包含应用程序信息的存文本文件，通常根据所有用户的可见性的不同可以放在~/.local/share/applications/（针对当前用户）或者是/usr/share/applications/（针对所有用户）下。\n.desktop文件常用字段 Type：通常为Application（应用程序）或者是Link（URL链接） Name：应用程序显示的名称 Comment：简单的描述，通常在鼠标悬停时显示 GenericName：为应用程序提供一个通用的名称，用助于用户理解应用程序的功能 Exec：可执行文件的路径 Icon：应用的图标 StartupNotify：启动应用程序是否发送通知，值为true或false StartupWMClass：置顶应用程序窗口管理器的类名，有助于窗口管理器识别和分组应用程序的窗口 MimeType：指定了应用程序支持的 MIME 类型 [Desktop Action new-empty-window]：表示开始定义一个桌面动作 Keywords：为应用程序提供关键词，有助于用户在搜索应用程序时找到它 Terminal：是否在终端中运行，值为true或false Categories：应用程序的分类，用逗号分隔 在 .desktop 文件中，MimeType 字段用于指定应用程序可以处理的文件类型。\n具体案例 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 [Desktop Entry] Name=Visual Studio Code Comment=Code Editing. Refined. GenericName=Text Editor Exec=/usr/bin/code %F Icon=visual-studio-code Type=Application StartupNotify=false StartupWMClass=Code Categories=TextEditor;Development;IDE; MimeType=text/plain;inode/directory;application/x-code-workspace; Actions=new-empty-window; Keywords=vscode; [Desktop Action new-empty-window] Name=New Empty Window Exec=/usr/bin/code --new-window %F Icon=visual-studio-code Categories的具体内容可以访问：\nhttps://specifications.freedesktop.org/menu-spec/latest/apa.html\nservice文件 .service 文件是systemd系统中的一个单元（Unit）配置文件，用于定义和配置系统服务，使得系统管理员可以更容易地管理这些服务的启动、停止和其他行为。而Systemd是一系列工具的集合，其作用不仅可以启动操作系统，还可以管理后台服务、日志归档、设备管理、电源管理、定时任务等等。 service文件存放路径：\n/etc/systemd/system/这是默认的系统服务文件路径，通常存放系统级服务 /lib/systemd/system/通常是用于存放预安装的系统服务文件 /etc/systemd/user/存放用户级服务 ~/.config/systemd/user/存放单个用户的服务 /run/systemd/system/：用于存放运行时生成的系统服务文件 /run/systemd/user/：用于存放运行时生成的用户级服务文件 文件基本结构 [Unit]: 包含描述信息、依赖关系 Description：简短描述 Documentation：文档地址 Requires：当前 Unit 依赖的其他 Unit，如果它们没有运行，当前 Unit 会启动失败 Wants：与当前 Unit 配合的其他 Unit，如果它们没有运行，当前 Unit 不会启动失败 BindsTo：与Requires类似，它指定的 Unit 如果退出，会导致当前 Unit 停止运行 Before：如果该字段指定的 Unit 也要启动，那么必须在当前 Unit 之后启动 After：如果该字段指定的 Unit 也要启动，那么必须在当前 Unit 之前启动 Conflicts：这里指定的 Unit 不能与当前 Unit 同时运行 Condition...：当前 Unit 运行必须满足的条件，否则不会运行 Assert...：当前 Unit 运行必须满足的条件，否则会报启动失败 [Service]: 定义服务的核心配置，如如何启动和停止服务 WantedBy：它的值是一个或多个 Target，当前 Unit 激活时（enable）符号链接会放入/etc/systemd/system目录下面以 Target 名 + .wants后缀构成的子目录中 RequiredBy：它的值是一个或多个 Target，当前 Unit 激活时，符号链接会放入/etc/systemd/system目录下面以 Target 名 + .required后缀构成的子目录中 Alias：当前 Unit 可用于启动的别名 Also：当前 Unit 激活（enable）时，会被同时激活的其他 Unit [Install]: 定义服务的安装信息，如何启用或禁用 Type：定义启动时的进程行为。它有以下几种值。 Type=simple：默认值，执行ExecStart指定的命令，启动主进程 Type=forking：以 fork 方式从父进程创建子进程，创建后父进程会立即退出 Type=oneshot：一次性进程，Systemd 会等当前服务退出，再继续往下执行 Type=dbus：当前服务通过D-Bus启动 Type=notify：当前服务启动完毕，会通知Systemd，再继续往下执行 Type=idle：若有其他任务执行完毕，当前服务才会运行 ExecStart：启动当前服务的命令 ExecStartPre：启动当前服务之前执行的命令 ExecStartPost：启动当前服务之后执行的命令 ExecReload：重启当前服务时执行的命令 ExecStop：停止当前服务时执行的命令 ExecStopPost：停止当其服务之后执行的命令 RestartSec：自动重启当前服务间隔的秒数 Restart：定义何种情况 Systemd 会自动重启当前服务，可能的值包括always（总是重启）、on-success、on-failure、on-abnormal、on-abort、on-watchdog TimeoutSec：定义 Systemd 停止当前服务之前等待的秒数 Environment：指定环境变量 具体案例 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 [Unit] # 服务描述 Description=Bluetooth service # 文档链接，指向 bluetoothd 的 man 页面 Documentation=man:bluetoothd(8) # 条件：只有当 /sys/class/bluetooth 目录存在时才启动此服务 ConditionPathIsDirectory=/sys/class/bluetooth [Service] # 服务类型：dbus，表示这是一个 D-Bus 服务 Type=dbus # D-Bus 服务的名称 BusName=org.bluez # 启动命令：执行 bluetoothd 守护进程 ExecStart=/usr/lib/bluetooth/bluetoothd # 允许服务通知系统其主进程的就绪状态 NotifyAccess=main # 看门狗超时设置（当前被注释） #WatchdogSec=10 # 服务崩溃后的重启策略（当前被注释） #Restart=on-failure # 设置进程的能力边界，只允许网络管理和绑定服务端口的能力 CapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_BIND_SERVICE # 限制进程可以创建的最大线程数为 1 LimitNPROC=1 # 文件系统锁定 # 保护 home 目录，禁止服务访问 ProtectHome=true # 严格保护系统目录，使其只读 ProtectSystem=strict # 为服务提供私有的 /tmp 目录 PrivateTmp=true # 保护内核可调参数，禁止修改 ProtectKernelTunables=true # 保护控制组，禁止修改 ProtectControlGroups=true # 指定服务的状态目录 StateDirectory=bluetooth # 设置状态目录的权限模式 StateDirectoryMode=0700 # 指定服务的配置目录 ConfigurationDirectory=bluetooth # 设置配置目录的权限模式 ConfigurationDirectoryMode=0555 # 执行映射 # 禁止内存中的写入和执行操作，提高安全性 MemoryDenyWriteExecute=true # 权限提升 # 禁止获取新的权限，提高安全性 NoNewPrivileges=true # 实时性 # 限制实时调度，防止服务影响系统实时性能 RestrictRealtime=true [Install] # 指定此服务应该在哪个目标（target）下启用 WantedBy=bluetooth.target # 为此服务创建一个别名，用于 D-Bus 激活 Alias=dbus-org.bluez.service 管理命令 1 2 3 4 5 6 7 8 9 10 11 12 # 启动服务 systemctl start app.service # 停止服务 systemctl stop app.service # 重启服务 systemctl restart app.service # 使服务开机自启动 systemctl enable app.service # 关闭开机自启动 systemctl disable app.service # 查看服务状态 systemctl status app.service fonts.conf文件 fonts.conf是字体配置文件，用于定制和调整字体的渲染及优先级设置。以下是一些常见用途：\n字体优先级：指定在显示特定语言或样式是优先使用哪种字体。 字体替换：字体不可用时，定义替换字体。 字体特性： 设置字体的渲染特性，如抗锯齿、亚像素渲染等。 语言支持： 定义特定语言或字符集的字体。 fonts.conf文件的路径分为两种，一是系统级别的配置，文件位置是：/etc/fonts/fonts.conf，二是用户级别的配置，位置是：~/.config/fontconfig/fonts.conf 安装对应字体：\n1 sudo pacman -S ttf-roboto noto-fonts ttf-dejavu adobe-source-han-sans-cn-fonts adobe-source-han-serif-cn-fonts 由于我使用的Endeavour OS系统是基于Arch Linux的一个发行版，因此可以使用pacman安装字体。\n用户字体配置文件内容如下：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 \u003c?xml version=\"1.0\"?\u003e \u003c!DOCTYPE fontconfig SYSTEM \"fonts.dtd\"\u003e /usr/share/fonts /usr/local/share/fonts ","wordCount":"4149","inLanguage":"zh","image":"https://lyj.cloudns.ch/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-07-19T22:47:54Z","dateModified":"2024-07-19T22:47:54Z","author":{"@type":"Person","name":"LYJ"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lyj.cloudns.ch/post/linux-general-configuration-file/"},"publisher":{"@type":"Organization","name":"LYJ's Blog","logo":{"@type":"ImageObject","url":"https://lyj.cloudns.ch/favicon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://lyj.cloudns.ch/ accesskey=h title="Home (Alt + H)"><img src=https://lyj.cloudns.ch/home.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://lyj.cloudns.ch/ title="LYJ's Blog"><span>首页</span></a></li><li><a href=https://lyj.cloudns.ch/archives/ title=归档><span>归档</span></a></li><li><a href=https://lyj.cloudns.ch/categories/ title=Categories><span>分类</span></a></li><li><a href=https://lyj.cloudns.ch/tags/ title=Tags><span>标签</span></a></li><li><a href=https://lyj.cloudns.ch/search/ title=搜索><span>搜索</span></a></li><li><a href=https://lyj.cloudns.ch/about/ title=关于><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://lyj.cloudns.ch/>主页</a>&nbsp;»&nbsp;<a href=https://lyj.cloudns.ch/post/>Posts</a></div><h1 class="post-title entry-hint-parent">Linux通用配置文件</h1><div class=post-description>在不同的Linux发行版本中都存在这一些通用的配置文件，这是一些通用配置文件的写法</div><div class=post-meta><span title='2024-07-19 22:47:54 +0000 UTC'>2024-07-19</span>&nbsp;·&nbsp;9 分钟&nbsp;·&nbsp;4149 字&nbsp;·&nbsp;LYJ</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#desktop文件>desktop文件</a><ul><li><a href=#desktop文件常用字段><code>.desktop</code>文件常用字段</a></li><li><a href=#具体案例>具体案例</a></li></ul></li><li><a href=#service文件>service文件</a><ul><li><a href=#文件基本结构>文件基本结构</a></li><li><a href=#具体案例-1>具体案例</a></li><li><a href=#管理命令>管理命令</a></li></ul></li><li><a href=#fontsconf文件>fonts.conf文件</a></li></ul></nav></div></details></div><div class=post-content><h1 id=desktop文件>desktop文件<a hidden class=anchor aria-hidden=true href=#desktop文件>#</a></h1><p>在日常使用Linux系统的时候，经常会遇到一些软件只提供了可执行文件，没有提供可以直接通过包管理工具安装的途径，比如说常见的<code>AppImage</code> 文件或者是一些没有对特定发行版本进行安装包编译的开源项目，这些软件就只能通过命令行或者是在文件管理器下找到对应的启动文件在启动比较繁琐，不像那些通过包管理工具安装的软件，可以有桌面图标或者直接应用菜单中显示；而想要这些软件更包管理工具一样拥有桌面图标/应用菜单中显示，可以编写对应的<code>desktop</code>文件。</p><blockquote><p><code>desktop</code>文件是一个包含应用程序信息的存文本文件，通常根据所有用户的可见性的不同可以放在<code>~/.local/share/applications/</code>（针对当前用户）或者是<code>/usr/share/applications/</code>（针对所有用户）下。</p></blockquote><h2 id=desktop文件常用字段><code>.desktop</code>文件常用字段<a hidden class=anchor aria-hidden=true href=#desktop文件常用字段>#</a></h2><ul><li>Type：通常为Application（应用程序）或者是Link（URL链接）</li><li>Name：应用程序显示的名称</li><li>Comment：简单的描述，通常在鼠标悬停时显示</li><li>GenericName：为应用程序提供一个通用的名称，用助于用户理解应用程序的功能</li><li>Exec：可执行文件的路径</li><li>Icon：应用的图标</li><li>StartupNotify：启动应用程序是否发送通知，值为true或false</li><li>StartupWMClass：置顶应用程序窗口管理器的类名，有助于窗口管理器识别和分组应用程序的窗口</li><li>MimeType：指定了应用程序支持的 MIME 类型</li><li>[Desktop Action new-empty-window]：表示开始定义一个桌面动作</li><li>Keywords：为应用程序提供关键词，有助于用户在搜索应用程序时找到它</li><li>Terminal：是否在终端中运行，值为true或false</li><li>Categories：应用程序的分类，用逗号分隔</li></ul><blockquote><p>在 .desktop 文件中，MimeType 字段用于指定应用程序可以处理的文件类型。</p></blockquote><h2 id=具体案例>具体案例<a hidden class=anchor aria-hidden=true href=#具体案例>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>[Desktop Entry]
</span></span><span class=line><span class=cl>Name=Visual Studio Code
</span></span><span class=line><span class=cl>Comment=Code Editing. Refined.
</span></span><span class=line><span class=cl>GenericName=Text Editor
</span></span><span class=line><span class=cl>Exec=/usr/bin/code %F
</span></span><span class=line><span class=cl>Icon=visual-studio-code
</span></span><span class=line><span class=cl>Type=Application
</span></span><span class=line><span class=cl>StartupNotify=false
</span></span><span class=line><span class=cl>StartupWMClass=Code
</span></span><span class=line><span class=cl>Categories=TextEditor;Development;IDE;
</span></span><span class=line><span class=cl>MimeType=text/plain;inode/directory;application/x-code-workspace;
</span></span><span class=line><span class=cl>Actions=new-empty-window;
</span></span><span class=line><span class=cl>Keywords=vscode;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[Desktop Action new-empty-window]
</span></span><span class=line><span class=cl>Name=New Empty Window
</span></span><span class=line><span class=cl>Exec=/usr/bin/code --new-window %F
</span></span><span class=line><span class=cl>Icon=visual-studio-code
</span></span></code></pre></td></tr></table></div></div><p><strong>Categories的具体内容可以访问：</strong></p><blockquote><p><a href=https://specifications.freedesktop.org/menu-spec/latest/apa.html>https://specifications.freedesktop.org/menu-spec/latest/apa.html</a></p></blockquote><h1 id=service文件>service文件<a hidden class=anchor aria-hidden=true href=#service文件>#</a></h1><p><code>.service</code> 文件是<code>systemd</code>系统中的一个单元（Unit）配置文件，用于定义和配置系统服务，使得系统管理员可以更容易地管理这些服务的启动、停止和其他行为。而<code>Systemd</code>是一系列工具的集合，其作用不仅可以启动操作系统，还可以管理后台服务、日志归档、设备管理、电源管理、定时任务等等。
<strong>service文件存放路径：</strong></p><ol><li><code>/etc/systemd/system/</code>这是默认的系统服务文件路径，通常存放系统级服务</li><li><code>/lib/systemd/system/</code>通常是用于存放预安装的系统服务文件</li><li><code>/etc/systemd/user/</code>存放用户级服务</li><li><code>~/.config/systemd/user/</code>存放单个用户的服务</li><li><code>/run/systemd/system/</code>：用于存放运行时生成的系统服务文件</li><li><code>/run/systemd/user/</code>：用于存放运行时生成的用户级服务文件</li></ol><h2 id=文件基本结构>文件基本结构<a hidden class=anchor aria-hidden=true href=#文件基本结构>#</a></h2><ul><li><code>[Unit]</code>: 包含描述信息、依赖关系<ul><li><code>Description</code>：简短描述</li><li><code>Documentation</code>：文档地址</li><li><code>Requires</code>：当前 Unit 依赖的其他 Unit，如果它们没有运行，当前 Unit 会启动失败</li><li><code>Wants</code>：与当前 Unit 配合的其他 Unit，如果它们没有运行，当前 Unit 不会启动失败</li><li><code>BindsTo</code>：与<code>Requires</code>类似，它指定的 Unit 如果退出，会导致当前 Unit 停止运行</li><li><code>Before</code>：如果该字段指定的 Unit 也要启动，那么必须在当前 Unit 之后启动</li><li><code>After</code>：如果该字段指定的 Unit 也要启动，那么必须在当前 Unit 之前启动</li><li><code>Conflicts</code>：这里指定的 Unit 不能与当前 Unit 同时运行</li><li><code>Condition...</code>：当前 Unit 运行必须满足的条件，否则不会运行</li><li><code>Assert...</code>：当前 Unit 运行必须满足的条件，否则会报启动失败</li></ul></li><li><code>[Service]</code>: 定义服务的核心配置，如如何启动和停止服务<ul><li><code>WantedBy</code>：它的值是一个或多个 Target，当前 Unit 激活时（enable）符号链接会放入<code>/etc/systemd/system</code>目录下面以 Target 名 + <code>.wants</code>后缀构成的子目录中</li><li><code>RequiredBy</code>：它的值是一个或多个 Target，当前 Unit 激活时，符号链接会放入<code>/etc/systemd/system</code>目录下面以 Target 名 + <code>.required</code>后缀构成的子目录中</li><li><code>Alias</code>：当前 Unit 可用于启动的别名</li><li><code>Also</code>：当前 Unit 激活（enable）时，会被同时激活的其他 Unit</li></ul></li><li><code>[Install]</code>: 定义服务的安装信息，如何启用或禁用<ul><li><code>Type</code>：定义启动时的进程行为。它有以下几种值。</li></ul><ul><li><code>Type=simple</code>：默认值，执行<code>ExecStart</code>指定的命令，启动主进程</li><li><code>Type=forking</code>：以 fork 方式从父进程创建子进程，创建后父进程会立即退出</li><li><code>Type=oneshot</code>：一次性进程，Systemd 会等当前服务退出，再继续往下执行</li><li><code>Type=dbus</code>：当前服务通过D-Bus启动</li><li><code>Type=notify</code>：当前服务启动完毕，会通知<code>Systemd</code>，再继续往下执行</li><li><code>Type=idle</code>：若有其他任务执行完毕，当前服务才会运行</li><li><code>ExecStart</code>：启动当前服务的命令</li><li><code>ExecStartPre</code>：启动当前服务之前执行的命令</li><li><code>ExecStartPost</code>：启动当前服务之后执行的命令</li><li><code>ExecReload</code>：重启当前服务时执行的命令</li><li><code>ExecStop</code>：停止当前服务时执行的命令</li><li><code>ExecStopPost</code>：停止当其服务之后执行的命令</li><li><code>RestartSec</code>：自动重启当前服务间隔的秒数</li><li><code>Restart</code>：定义何种情况 Systemd 会自动重启当前服务，可能的值包括<code>always</code>（总是重启）、<code>on-success</code>、<code>on-failure</code>、<code>on-abnormal</code>、<code>on-abort</code>、<code>on-watchdog</code></li><li><code>TimeoutSec</code>：定义 Systemd 停止当前服务之前等待的秒数</li><li><code>Environment</code>：指定环境变量</li></ul></li></ul><h2 id=具体案例-1>具体案例<a hidden class=anchor aria-hidden=true href=#具体案例-1>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>[Unit]
</span></span><span class=line><span class=cl># 服务描述
</span></span><span class=line><span class=cl>Description=Bluetooth service
</span></span><span class=line><span class=cl># 文档链接，指向 bluetoothd 的 man 页面
</span></span><span class=line><span class=cl>Documentation=man:bluetoothd(8)
</span></span><span class=line><span class=cl># 条件：只有当 /sys/class/bluetooth 目录存在时才启动此服务
</span></span><span class=line><span class=cl>ConditionPathIsDirectory=/sys/class/bluetooth
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[Service]
</span></span><span class=line><span class=cl># 服务类型：dbus，表示这是一个 D-Bus 服务
</span></span><span class=line><span class=cl>Type=dbus
</span></span><span class=line><span class=cl># D-Bus 服务的名称
</span></span><span class=line><span class=cl>BusName=org.bluez
</span></span><span class=line><span class=cl># 启动命令：执行 bluetoothd 守护进程
</span></span><span class=line><span class=cl>ExecStart=/usr/lib/bluetooth/bluetoothd
</span></span><span class=line><span class=cl># 允许服务通知系统其主进程的就绪状态
</span></span><span class=line><span class=cl>NotifyAccess=main
</span></span><span class=line><span class=cl># 看门狗超时设置（当前被注释）
</span></span><span class=line><span class=cl>#WatchdogSec=10
</span></span><span class=line><span class=cl># 服务崩溃后的重启策略（当前被注释）
</span></span><span class=line><span class=cl>#Restart=on-failure
</span></span><span class=line><span class=cl># 设置进程的能力边界，只允许网络管理和绑定服务端口的能力
</span></span><span class=line><span class=cl>CapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
</span></span><span class=line><span class=cl># 限制进程可以创建的最大线程数为 1
</span></span><span class=line><span class=cl>LimitNPROC=1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 文件系统锁定
</span></span><span class=line><span class=cl># 保护 home 目录，禁止服务访问
</span></span><span class=line><span class=cl>ProtectHome=true
</span></span><span class=line><span class=cl># 严格保护系统目录，使其只读
</span></span><span class=line><span class=cl>ProtectSystem=strict
</span></span><span class=line><span class=cl># 为服务提供私有的 /tmp 目录
</span></span><span class=line><span class=cl>PrivateTmp=true
</span></span><span class=line><span class=cl># 保护内核可调参数，禁止修改
</span></span><span class=line><span class=cl>ProtectKernelTunables=true
</span></span><span class=line><span class=cl># 保护控制组，禁止修改
</span></span><span class=line><span class=cl>ProtectControlGroups=true
</span></span><span class=line><span class=cl># 指定服务的状态目录
</span></span><span class=line><span class=cl>StateDirectory=bluetooth
</span></span><span class=line><span class=cl># 设置状态目录的权限模式
</span></span><span class=line><span class=cl>StateDirectoryMode=0700
</span></span><span class=line><span class=cl># 指定服务的配置目录
</span></span><span class=line><span class=cl>ConfigurationDirectory=bluetooth
</span></span><span class=line><span class=cl># 设置配置目录的权限模式
</span></span><span class=line><span class=cl>ConfigurationDirectoryMode=0555
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 执行映射
</span></span><span class=line><span class=cl># 禁止内存中的写入和执行操作，提高安全性
</span></span><span class=line><span class=cl>MemoryDenyWriteExecute=true
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 权限提升
</span></span><span class=line><span class=cl># 禁止获取新的权限，提高安全性
</span></span><span class=line><span class=cl>NoNewPrivileges=true
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 实时性
</span></span><span class=line><span class=cl># 限制实时调度，防止服务影响系统实时性能
</span></span><span class=line><span class=cl>RestrictRealtime=true
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[Install]
</span></span><span class=line><span class=cl># 指定此服务应该在哪个目标（target）下启用
</span></span><span class=line><span class=cl>WantedBy=bluetooth.target
</span></span><span class=line><span class=cl># 为此服务创建一个别名，用于 D-Bus 激活
</span></span><span class=line><span class=cl>Alias=dbus-org.bluez.service
</span></span></code></pre></td></tr></table></div></div><h2 id=管理命令>管理命令<a hidden class=anchor aria-hidden=true href=#管理命令>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 启动服务</span>
</span></span><span class=line><span class=cl>systemctl start app.service
</span></span><span class=line><span class=cl><span class=c1># 停止服务</span>
</span></span><span class=line><span class=cl>systemctl stop app.service
</span></span><span class=line><span class=cl><span class=c1># 重启服务</span>
</span></span><span class=line><span class=cl>systemctl restart app.service
</span></span><span class=line><span class=cl><span class=c1># 使服务开机自启动</span>
</span></span><span class=line><span class=cl>systemctl <span class=nb>enable</span> app.service
</span></span><span class=line><span class=cl><span class=c1># 关闭开机自启动</span>
</span></span><span class=line><span class=cl>systemctl disable app.service
</span></span><span class=line><span class=cl><span class=c1># 查看服务状态</span>
</span></span><span class=line><span class=cl>systemctl status app.service
</span></span></code></pre></td></tr></table></div></div><h1 id=fontsconf文件>fonts.conf文件<a hidden class=anchor aria-hidden=true href=#fontsconf文件>#</a></h1><p>fonts.conf是字体配置文件，用于定制和调整字体的渲染及优先级设置。以下是一些常见用途：</p><ol><li><strong>字体优先级</strong>：指定在显示特定语言或样式是优先使用哪种字体。</li><li><strong>字体替换</strong>：字体不可用时，定义替换字体。</li><li><strong>字体特性</strong>： 设置字体的渲染特性，如抗锯齿、亚像素渲染等。</li><li><strong>语言支持</strong>： 定义特定语言或字符集的字体。</li></ol><blockquote><p><code>fonts.conf</code>文件的路径分为两种，一是系统级别的配置，文件位置是：<code>/etc/fonts/fonts.conf</code>，二是用户级别的配置，位置是：<code>~/.config/fontconfig/fonts.conf</code>
<strong>安装对应字体：</strong></p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo pacman -S ttf-roboto noto-fonts ttf-dejavu adobe-source-han-sans-cn-fonts adobe-source-han-serif-cn-fonts 
</span></span></code></pre></td></tr></table></div></div><blockquote><p>由于我使用的<code>Endeavour OS</code>系统是基于<code>Arch Linux</code>的一个发行版，因此可以使用pacman安装字体。</p></blockquote><p><strong>用户字体配置文件内容如下：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>&lt;?xml <span class=nv>version</span><span class=o>=</span><span class=s2>&#34;1.0&#34;</span>?&gt;
</span></span><span class=line><span class=cl>&lt;!DOCTYPE fontconfig SYSTEM <span class=s2>&#34;fonts.dtd&#34;</span>&gt;
</span></span><span class=line><span class=cl>&lt;fontconfig&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  &lt;!-- 指定字体目录 --&gt;
</span></span><span class=line><span class=cl>  &lt;!-- 系统级字体目录，用于存放系统范围内的字体，所有用户都可以访问这些字体 --&gt;
</span></span><span class=line><span class=cl>  &lt;dir&gt;/usr/share/fonts&lt;/dir&gt;
</span></span><span class=line><span class=cl>  &lt;!-- 本地共享字体目录，类似于系统级目录，但管理员可以在这里安装特定于本地使用的字体 --&gt;
</span></span><span class=line><span class=cl>  &lt;dir&gt;/usr/local/share/fonts&lt;/dir&gt;
</span></span><span class=line><span class=cl>  &lt;!-- 用户 XDG 目录中的字体，遵循 XDG 目录结构，通常在 ~/.local/share/fonts --&gt;
</span></span><span class=line><span class=cl>  &lt;dir <span class=nv>prefix</span><span class=o>=</span><span class=s2>&#34;xdg&#34;</span>&gt;fonts&lt;/dir&gt;
</span></span><span class=line><span class=cl>  &lt;!-- 用户主目录下的字体，用户可以在其主目录下安装私有字体 --&gt;
</span></span><span class=line><span class=cl>  &lt;dir&gt;~/.fonts&lt;/dir&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  &lt;!-- 全局字体设置，用于影响全系统范围内的字体渲染特性 --&gt;
</span></span><span class=line><span class=cl>  &lt;!-- 启用自动微调，使字体在不同分辨率下更为清晰 --&gt;
</span></span><span class=line><span class=cl>  &lt;match <span class=nv>target</span><span class=o>=</span><span class=s2>&#34;font&#34;</span>&gt;
</span></span><span class=line><span class=cl>    &lt;edit <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;autohint&#34;</span> <span class=nv>mode</span><span class=o>=</span><span class=s2>&#34;assign&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;bool&gt;true&lt;/bool&gt;
</span></span><span class=line><span class=cl>    &lt;/edit&gt;
</span></span><span class=line><span class=cl>    &lt;!-- 启用抗锯齿，使字体边缘更平滑，减少锯齿现象 --&gt;
</span></span><span class=line><span class=cl>    &lt;edit <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;antialias&#34;</span> <span class=nv>mode</span><span class=o>=</span><span class=s2>&#34;assign&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;bool&gt;true&lt;/bool&gt;
</span></span><span class=line><span class=cl>    &lt;/edit&gt;
</span></span><span class=line><span class=cl>    &lt;!-- 启用内嵌点阵字体的使用，特别是针对小尺寸和特定字体样式时，提供更为清晰的显示 --&gt;
</span></span><span class=line><span class=cl>    &lt;edit <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;embeddedbitmap&#34;</span> <span class=nv>mode</span><span class=o>=</span><span class=s2>&#34;assign&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;bool&gt;true&lt;/bool&gt;
</span></span><span class=line><span class=cl>    &lt;/edit&gt;
</span></span><span class=line><span class=cl>  &lt;/match&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  &lt;!-- 英文默认字体使用 Roboto 和 Noto Serif ，终端使用 DejaVu Sans Mono 。 --&gt;
</span></span><span class=line><span class=cl>  &lt;match&gt;
</span></span><span class=line><span class=cl>    &lt;!-- 为所有 serif 字体族的请求添加 Noto Serif 作为默认字体 --&gt;
</span></span><span class=line><span class=cl>    &lt;<span class=nb>test</span> <span class=nv>qual</span><span class=o>=</span><span class=s2>&#34;any&#34;</span> <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;string&gt;serif&lt;/string&gt;
</span></span><span class=line><span class=cl>    &lt;/test&gt;
</span></span><span class=line><span class=cl>    &lt;edit <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span> <span class=nv>mode</span><span class=o>=</span><span class=s2>&#34;prepend&#34;</span> <span class=nv>binding</span><span class=o>=</span><span class=s2>&#34;strong&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;string&gt;Noto Serif&lt;/string&gt;
</span></span><span class=line><span class=cl>    &lt;/edit&gt;
</span></span><span class=line><span class=cl>  &lt;/match&gt;
</span></span><span class=line><span class=cl>  &lt;match <span class=nv>target</span><span class=o>=</span><span class=s2>&#34;pattern&#34;</span>&gt;
</span></span><span class=line><span class=cl>    &lt;!-- 为所有 sans-serif 字体族的请求添加 Roboto 作为默认字体 --&gt;
</span></span><span class=line><span class=cl>    &lt;<span class=nb>test</span> <span class=nv>qual</span><span class=o>=</span><span class=s2>&#34;any&#34;</span> <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;string&gt;sans-serif&lt;/string&gt;
</span></span><span class=line><span class=cl>    &lt;/test&gt;
</span></span><span class=line><span class=cl>    &lt;edit <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span> <span class=nv>mode</span><span class=o>=</span><span class=s2>&#34;prepend&#34;</span> <span class=nv>binding</span><span class=o>=</span><span class=s2>&#34;strong&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;string&gt;Roboto&lt;/string&gt;
</span></span><span class=line><span class=cl>    &lt;/edit&gt;
</span></span><span class=line><span class=cl>  &lt;/match&gt;
</span></span><span class=line><span class=cl>  &lt;match <span class=nv>target</span><span class=o>=</span><span class=s2>&#34;pattern&#34;</span>&gt;
</span></span><span class=line><span class=cl>    &lt;!-- 为所有等宽（monospace）字体族的请求添加 DejaVu Sans Mono 作为默认字体 --&gt;
</span></span><span class=line><span class=cl>    &lt;<span class=nb>test</span> <span class=nv>qual</span><span class=o>=</span><span class=s2>&#34;any&#34;</span> <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;string&gt;monospace&lt;/string&gt;
</span></span><span class=line><span class=cl>    &lt;/test&gt;
</span></span><span class=line><span class=cl>    &lt;edit <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span> <span class=nv>mode</span><span class=o>=</span><span class=s2>&#34;prepend&#34;</span> <span class=nv>binding</span><span class=o>=</span><span class=s2>&#34;strong&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;string&gt;DejaVu Sans Mono&lt;/string&gt;
</span></span><span class=line><span class=cl>    &lt;/edit&gt;
</span></span><span class=line><span class=cl>  &lt;/match&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  &lt;!-- 中文默认字体使用思源黑体和思源宋体，不使用 Noto Sans CJK SC 是因为该字体会在特定情况下显示片假字。 --&gt;
</span></span><span class=line><span class=cl>  &lt;match&gt;
</span></span><span class=line><span class=cl>    &lt;!-- 为中文语言的 serif 字体族请求添加思源宋体 CN --&gt;
</span></span><span class=line><span class=cl>    &lt;<span class=nb>test</span> <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;lang&#34;</span> <span class=nv>compare</span><span class=o>=</span><span class=s2>&#34;contains&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;string&gt;zh&lt;/string&gt;
</span></span><span class=line><span class=cl>    &lt;/test&gt;
</span></span><span class=line><span class=cl>    &lt;<span class=nb>test</span> <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;string&gt;serif&lt;/string&gt;
</span></span><span class=line><span class=cl>    &lt;/test&gt;
</span></span><span class=line><span class=cl>    &lt;edit <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span> <span class=nv>mode</span><span class=o>=</span><span class=s2>&#34;prepend&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;string&gt;Source Han Serif CN&lt;/string&gt;
</span></span><span class=line><span class=cl>    &lt;/edit&gt;
</span></span><span class=line><span class=cl>  &lt;/match&gt;
</span></span><span class=line><span class=cl>  &lt;match&gt;
</span></span><span class=line><span class=cl>    &lt;!-- 为中文语言的 sans-serif 字体族请求添加思源黑体 CN --&gt;
</span></span><span class=line><span class=cl>    &lt;<span class=nb>test</span> <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;lang&#34;</span> <span class=nv>compare</span><span class=o>=</span><span class=s2>&#34;contains&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;string&gt;zh&lt;/string&gt;
</span></span><span class=line><span class=cl>    &lt;/test&gt;
</span></span><span class=line><span class=cl>    &lt;<span class=nb>test</span> <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;string&gt;sans-serif&lt;/string&gt;
</span></span><span class=line><span class=cl>    &lt;/test&gt;
</span></span><span class=line><span class=cl>    &lt;edit <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span> <span class=nv>mode</span><span class=o>=</span><span class=s2>&#34;prepend&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;string&gt;Source Han Sans CN&lt;/string&gt;
</span></span><span class=line><span class=cl>    &lt;/edit&gt;
</span></span><span class=line><span class=cl>  &lt;/match&gt;
</span></span><span class=line><span class=cl>  &lt;match&gt;
</span></span><span class=line><span class=cl>    &lt;!-- 为中文语言的等宽（monospace）字体族请求添加 Noto Sans Mono CJK SC --&gt;
</span></span><span class=line><span class=cl>    &lt;<span class=nb>test</span> <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;lang&#34;</span> <span class=nv>compare</span><span class=o>=</span><span class=s2>&#34;contains&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;string&gt;zh&lt;/string&gt;
</span></span><span class=line><span class=cl>    &lt;/test&gt;
</span></span><span class=line><span class=cl>    &lt;<span class=nb>test</span> <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;string&gt;monospace&lt;/string&gt;
</span></span><span class=line><span class=cl>    &lt;/test&gt;
</span></span><span class=line><span class=cl>    &lt;edit <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span> <span class=nv>mode</span><span class=o>=</span><span class=s2>&#34;prepend&#34;</span>&gt;
</span></span><span class=line><span class=cl>      &lt;string&gt;Noto Sans Mono CJK SC&lt;/string&gt;
</span></span><span class=line><span class=cl>    &lt;/edit&gt;
</span></span><span class=line><span class=cl>  &lt;/match&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  &lt;!-- 处理Windows 和 Linux下的常用中文字体 --&gt;
</span></span><span class=line><span class=cl>  &lt;!-- 将所有常见的中文字体映射到思源黑体和思源宋体，这样当这些字体未安装时会使用思源黑体和思源宋体。
</span></span><span class=line><span class=cl>       解决特定程序指定使用某特定字体，并且在字体不存在情况下不会使用回退字体导致中文显示不正常的情况。 --&gt;
</span></span><span class=line><span class=cl> &lt;match <span class=nv>target</span><span class=o>=</span><span class=s2>&#34;pattern&#34;</span>&gt;
</span></span><span class=line><span class=cl>        &lt;<span class=nb>test</span> <span class=nv>qual</span><span class=o>=</span><span class=s2>&#34;any&#34;</span> <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span>&gt;
</span></span><span class=line><span class=cl>            &lt;string&gt;SimHei&lt;/string&gt;
</span></span><span class=line><span class=cl>        &lt;/test&gt;
</span></span><span class=line><span class=cl>        &lt;edit <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span> <span class=nv>mode</span><span class=o>=</span><span class=s2>&#34;assign&#34;</span> <span class=nv>binding</span><span class=o>=</span><span class=s2>&#34;same&#34;</span>&gt;
</span></span><span class=line><span class=cl>            &lt;string&gt;Source Han Sans CN&lt;/string&gt;
</span></span><span class=line><span class=cl>        &lt;/edit&gt;
</span></span><span class=line><span class=cl>    &lt;/match&gt;
</span></span><span class=line><span class=cl>    &lt;match <span class=nv>target</span><span class=o>=</span><span class=s2>&#34;pattern&#34;</span>&gt;
</span></span><span class=line><span class=cl>        &lt;<span class=nb>test</span> <span class=nv>qual</span><span class=o>=</span><span class=s2>&#34;any&#34;</span> <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span>&gt;
</span></span><span class=line><span class=cl>            &lt;string&gt;SimSun&lt;/string&gt;
</span></span><span class=line><span class=cl>        &lt;/test&gt;
</span></span><span class=line><span class=cl>        &lt;edit <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span> <span class=nv>mode</span><span class=o>=</span><span class=s2>&#34;assign&#34;</span> <span class=nv>binding</span><span class=o>=</span><span class=s2>&#34;same&#34;</span>&gt;
</span></span><span class=line><span class=cl>            &lt;string&gt;Source Han Serif CN&lt;/string&gt;
</span></span><span class=line><span class=cl>        &lt;/edit&gt;
</span></span><span class=line><span class=cl>    &lt;/match&gt;
</span></span><span class=line><span class=cl>    &lt;match <span class=nv>target</span><span class=o>=</span><span class=s2>&#34;pattern&#34;</span>&gt;
</span></span><span class=line><span class=cl>        &lt;<span class=nb>test</span> <span class=nv>qual</span><span class=o>=</span><span class=s2>&#34;any&#34;</span> <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span>&gt;
</span></span><span class=line><span class=cl>            &lt;string&gt;SimSun-18030&lt;/string&gt;
</span></span><span class=line><span class=cl>        &lt;/test&gt;
</span></span><span class=line><span class=cl>        &lt;edit <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;family&#34;</span> <span class=nv>mode</span><span class=o>=</span><span class=s2>&#34;assign&#34;</span> <span class=nv>binding</span><span class=o>=</span><span class=s2>&#34;same&#34;</span>&gt;
</span></span><span class=line><span class=cl>            &lt;string&gt;Source Han Serif CN&lt;/string&gt;
</span></span><span class=line><span class=cl>        &lt;/edit&gt;
</span></span><span class=line><span class=cl>    &lt;/match&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;/fontconfig&gt;
</span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://lyj.cloudns.ch/tags/linux/>Linux</a></li></ul><nav class=paginav><a class=prev href=https://lyj.cloudns.ch/post/endeavoursos-install-graphics-card-driver/><span class=title>« 上一页</span><br><span>EndeavourOS安装显卡驱动</span>
</a><a class=next href=https://lyj.cloudns.ch/post/linux-daily-use-record/><span class=title>下一页 »</span><br><span>Linux日常使用记录</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://lyj.cloudns.ch/>LYJ's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>